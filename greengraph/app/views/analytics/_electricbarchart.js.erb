/* Place all the behaviors and hooks related to the matching controller here.
All this logic will automatically be available in application.js.*/

$(document).ready(function() {

var dataelectric = {
    labels: ["Commercial", "Residential"],
    datasets: [
        {
            label: "Electric usage in Kw",
            fillColor: "rgba(220,220,220,0.2)",
            strokeColor: "rgba(220,220,220,1)",
            pointColor: "rgba(220,220,220,1)",
            pointStrokeColor: "#fff",
            pointHighlightFill: "#fff",
            pointHighlightStroke: "rgba(220,220,220,1)",
            data: [<%= @commercialelectric %>, <%= @residentialelectric %>]
        }
    ]
};

var optionselectric = {
    //Boolean - Whether the scale should start at zero, or an order of magnitude down from the lowest value
    scaleBeginAtZero : true,

    //Boolean - Whether grid lines are shown across the chart
    scaleShowGridLines : true,

    //String - Colour of the grid lines
    scaleGridLineColor : "rgba(0,0,0,.05)",

    //Number - Width of the grid lines
    scaleGridLineWidth : 1,

    //Boolean - Whether to show horizontal lines (except X axis)
    scaleShowHorizontalLines: true,

    //Boolean - Whether to show vertical lines (except Y axis)
    scaleShowVerticalLines: true,

    //Boolean - If there is a stroke on each bar
    barShowStroke : true,

    //Number - Pixel width of the bar stroke
    barStrokeWidth : 2,

    //Number - Spacing between each of the X value sets
    barValueSpacing : 5,

    //Number - Spacing between data sets within X values
    barDatasetSpacing : 1,

};

//ugly hack to clear old chart on refresh
  $('#allelectricchart').remove();
  $('#allelectricchartcontainer').append('<canvas id="allelectricchart"></canvas>');
    //draw the total gas usage bar chart
    var cty = document.getElementById("allelectricchart").getContext("2d");
    cty.canvas.width  = $('#allelectricchartcontainer').innerWidth() - 50;
    var allelectricchart = new Chart(cty).Bar(dataelectric, optionselectric);
});